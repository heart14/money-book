<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liiwe.moneybook.mapper.MoneyBookMapper">

    <select id="selectCategoryData" parameterType="java.lang.String" resultType="java.util.Map">
        SELECT t.`category` "categoryId",c.`name` "categoryName",SUM(t.`stored_amount`) "totalAmount"
        FROM `t_money_book` t
        LEFT JOIN `t_category` c ON c.`id` = t.`category`
        WHERE t.`date` like #{date}
        AND t.`username`  = #{username}
        AND t.`type`  = #{type}
        GROUP BY t.`category`
        ORDER BY totalAmount desc
    </select>


</mapper>